# Spring面试题

## Q1 SpringBean的作用域之间有什么区别？

SpringBean的作用域有

| 作用域    | 效果                                                        |
| --------- | ----------------------------------------------------------- |
| singleton | 在Spring IoC容器中只存在一个Bean实例                        |
| prototype | 每个获取Bean，都会返回一个新的实例                          |
| request   | 每个请求都会创建一个实例，仅在WebApplicationContext环境生效 |
| session   | 每个会话共享一个实例，仅在WebApplicationContext环境生效     |



## Q2 Spring支持的常用数据库传播事务和事务隔离级别

`@Transactional`注解可以通过**propagation属性**指定**事务传播类型**（7个）

| 传播类型                     | 描述                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| Propagation.REQUIRED(默认值) | 如果有事务在运行，当前方法在这个事务运行。否则，就启动一个新的事务。 |
| Propagation.REQUIRES         | 当前方法必须启动一个新的事务，在这个新的事务运行。如果有事务在运行，则将这个事务挂起。 |
| Propagation.SUPPORTS         | 如果有事务在运行，当前方法在这个事务运行。否则，就不在事务运行。 |
| Propagation.NOT_SUPPORTED    | 当前方法不能在事务运行。如果有事务在运行，则将这个事务挂起。 |
| Propagation.MANDATORY        | 当前方法必须在事务中运行。如果没有事务运行，则抛出异常。     |
| Propagation.NEVER            | 当前方法不能在事务中运行。如果有事务运行，则抛出异常。       |
| Propagation.NESTED           | 如果有事务运行，当前方法在这个事务的嵌套事务中运行。否则，新开一个事务。 |



`@Transactional`注解可以通过**isolation属性**指定**事务隔离级别**

| 事务隔离级别    | 描述                                                         |
| --------------- | ------------------------------------------------------------ |
| Read UnCommited | 读未提交。一个事务可以读到其他事务未提交的修改。             |
| Read Commited   | 读已提交。一个事务可以读到其他事务已提交的内容。             |
| Repeatable Read | 可重复读。一个事务中多次读取同一条记录，能够获得同样的值。即一个事务执行禁止其他事务对这个记录修改。 |
| Serializable    | 串行化。一个事务执行完成，才到另一个事务执行。               |



读未提交存在脏读、不可重复读、幻读问题。

读已提交存在不可重复读、幻读问题。

可重复读存在幻读问题。

串行化可以解决脏读、不可重复读、幻读问题，但效率最慢。



各种数据库产品对事务隔离级别的支持程度

| 事务隔离级别    | Oracle    | MySQL     |
| --------------- | --------- | --------- |
| Read UnCommited | x         | √         |
| Read Commited   | √（默认） | √         |
| Repeatable Read | x         | √（默认） |
| Serializable    | √         | √         |

